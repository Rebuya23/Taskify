<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Taskify</title>

<style>
/* ===== BODY ===== */
body{
  font-family: Arial;
  background:#cbf5dd;
  color:black;
  transition:.25s;
  margin:0;

  display:flex;
  justify-content:center;
  align-items:flex-start;
  min-height:100vh;
  padding-top:40px;
}

/* ===== WRAPPER ===== */
.wrapper{
  text-align:center;
  max-width:600px;
  width:100%;
}

/* ===== INPUT + BUTTONS ===== */
input,button{
  padding:6px 10px;
  margin:2px;
}

button.add{background:#4CAF50;color:white}
button.sort{background:#2196F3;color:white}
button.reset{background:#FFC107}
button.delete{background:#F44336;color:white}
button.complete{background:#2ecc71;color:white}
button.select{background:#5c7cfa;color:white}
button.theme{background:#9E9E9E;color:white}

/* ===== LIST ===== */
ul{padding-left:0}

li{
  list-style:none;
  margin:5px 0;
  padding:6px;
  display:flex;
  align-items:center;
  justify-content:space-between;
}

li:hover{background:#eee}
li.selected{background:#cce5ff}
li.done{background:#b7f7c5}

li.done span{
  text-decoration:line-through;
  color:gray;
}

li span{
  flex:1;
  text-align:left;
  padding:2px 4px;
  border-radius:4px;
}

li span:hover{
  background:#fff3a0;
}

.left{
  display:flex;
  align-items:center;
  gap:6px;
}

.right{
  display:flex;
  align-items:center;
  gap:6px;
}
</style>
</head>

<body>

<div class="wrapper">

<h2>Taskify</h2>
<p>A Simple Task Manager</p>
<p>Created by: <b>Aljomar M. Rebuya BSIT 2D</b></p>

<input id="taskInput" placeholder="Enter task">
<button class="add" id="addBtn">+</button>

<br><br>

<button class="sort" id="azBtn">Sort A-Z</button>
<button class="sort" id="zaBtn">Sort Z-A</button>
<button class="reset" id="resetBtn">Reset</button>
<button class="delete" id="deleteSelBtn">Delete Selected</button>
<button class="theme" id="themeBtn">Theme</button>

<ul id="taskList"></ul>

<p>
Total: <span id="total">0</span> |
Completed: <span id="completed">0</span> |
Deleted: <span id="deleted">0</span> |
Edited: <span id="edited">0</span>
</p>

</div>

<script>
/* ===== VARIABLES ===== */
let originalTasks = [];
let deleted = 0;
let edited = 0;
let dark = false;

const input = document.getElementById("taskInput");
const list  = document.getElementById("taskList");

/* ===== BUTTON EVENTS ===== */
document.getElementById("addBtn").onclick       = addTask;
document.getElementById("azBtn").onclick        = sortAZ;
document.getElementById("zaBtn").onclick        = sortZA;
document.getElementById("resetBtn").onclick     = resetTasks;
document.getElementById("deleteSelBtn").onclick = deleteSelected;
document.getElementById("themeBtn").onclick     = toggleTheme;

input.addEventListener("keydown", e=>{
  if(e.key==="Enter") addTask();
});

/* ===== CREATE TASK ===== */
function createTask(text){

  const li = document.createElement("li");

  const left = document.createElement("div");
  left.className="left";

  const right = document.createElement("div");
  right.className="right";

  const span = document.createElement("span");
  span.textContent = text;

  /* SELECT BUTTON */
  const selectBtn = document.createElement("button");
  selectBtn.className="select";
  selectBtn.onclick = e=>{
    e.stopPropagation();
    li.classList.toggle("selected");
  };

  /* COMPLETE BUTTON */
  const completeBtn = document.createElement("button");
  completeBtn.textContent="âœ”";
  completeBtn.className="complete";

  completeBtn.onclick = e=>{
    e.stopPropagation();
    li.classList.toggle("done");
    updateCounts();
  };

  /* DELETE BUTTON */
  const del = document.createElement("button");
  del.textContent="X";
  del.className="delete";

  del.onclick = e=>{
    e.stopPropagation();

    if(confirm(`Delete "${span.textContent}"?`)){
      originalTasks = originalTasks.filter(t=>t!==span.textContent);
      li.remove();
      deleted++;
      updateCounts();
    }
  };

  /* EDIT TEXT */
  span.onclick = e=>{
    e.stopPropagation();

    const oldText = span.textContent;
    const newText = prompt("Edit task:", oldText);

    if(!newText || newText===oldText) return;

    if(originalTasks.some(t=>t.toLowerCase()===newText.toLowerCase()))
      return alert("Duplicate task!");

    const i = originalTasks.indexOf(oldText);
    originalTasks[i] = newText;

    span.textContent = newText;
    edited++;
    updateCounts();
  };

  left.append(selectBtn, span);
  right.append(completeBtn, del);

  li.append(left, right);
  list.appendChild(li);
}

/* ===== ADD TASK ===== */
function addTask(){

  const text = input.value.trim();

  if(!text) return alert("Empty task!");

  if(originalTasks.some(t=>t.toLowerCase()===text.toLowerCase()))
    return alert("Duplicate task!");

  originalTasks.push(text);
  createTask(text);

  input.value="";
  updateCounts();
}

/* ===== DELETE SELECTED ===== */
function deleteSelected(){

  const selected = list.querySelectorAll(".selected");

  if(selected.length===0){
    alert("Select tasks first.");
    return;
  }

  if(confirm(`Delete ${selected.length} selected tasks?`)){
    selected.forEach(li=>{
      const text = li.querySelector("span").textContent;
      originalTasks = originalTasks.filter(t=>t!==text);
      li.remove();
      deleted++;
    });
    updateCounts();
  }
}

/* ===== RESET ===== */
function resetTasks(){
  list.innerHTML="";
  originalTasks.forEach(t=>createTask(t));
  updateCounts();
}

/* ===== SORT ===== */
function sortAZ(){
  [...list.children]
    .sort((a,b)=>
      a.querySelector("span").textContent
      .localeCompare(b.querySelector("span").textContent)
    )
    .forEach(li=>list.appendChild(li));
}

function sortZA(){
  [...list.children]
    .sort((a,b)=>
      b.querySelector("span").textContent
      .localeCompare(a.querySelector("span").textContent)
    )
    .forEach(li=>list.appendChild(li));
}

/* ===== THEME ===== */
function toggleTheme(){
  dark = !dark;
  document.body.style.background = dark ? "black" : "#cbf5dd";
  document.body.style.color      = dark ? "white" : "black";
}

/* ===== COUNTERS ===== */
function updateCounts(){
  document.getElementById("total").textContent     = list.children.length;
  document.getElementById("completed").textContent =
    document.querySelectorAll(".done").length;
  document.getElementById("deleted").textContent   = deleted;
  document.getElementById("edited").textContent    = edited;
}
</script>

</body>
</html>
